<view class="container">
  <!-- æ—¶é—´é€‰æ‹©å™¨ -->
  <view class="period-selector">
    <picker
      mode="selector"
      range="{{periods}}"
      bindchange="onPeriodChange"
      value="{{period === 'month' ? 0 : 1}}"
    >
      <view class="period-item">
        <text class="period-text">{{periods[period === 'month' ? 0 : 1]}}</text>
        <text class="arrow">â–¼</text>
      </view>
    </picker>
  </view>

  <!-- æ€»è®¡å¡ç‰‡ -->
  <view class="summary-cards">
    <view class="summary-card income-card">
      <text class="summary-label">æ€»æ”¶å…¥</text>
      <text class="summary-amount income-amount">Â¥{{totalIncome}}</text>
    </view>
    <view class="summary-card expense-card">
      <text class="summary-label">æ€»æ”¯å‡º</text>
      <text class="summary-amount expense-amount">Â¥{{totalExpense}}</text>
    </view>
    <view class="summary-card {{balance >= 0 ? 'balance-positive' : 'balance-negative'}}">
      <text class="summary-label">æ€»ç»“ä½™</text>
      <text class="summary-amount {{balance >= 0 ? 'positive' : 'negative'}}">Â¥{{balance}}</text>
    </view>
  </view>

  <!-- æ”¶å…¥åˆ†ç±» -->
  <view class="section">
    <view class="section-header">
      <view class="section-icon income-icon">Â¥</view>
      <text class="section-title income-title">æ”¶å…¥åˆ†å¸ƒ</text>
    </view>

    <view wx:if="{{incomeCategories.length === 0}}" class="empty">
      <text class="empty-icon">ðŸ“Š</text>
      <text class="empty-text">æš‚æ— æ”¶å…¥è®°å½•</text>
    </view>

    <view wx:else class="category-list">
      <view wx:for="{{incomeCategories}}" wx:key="category" class="category-item">
        <view class="category-header">
          <view class="category-info">
            <view class="category-dot income-dot"></view>
            <text class="category-name">{{item.category}}</text>
          </view>
          <text class="category-amount income-amount">Â¥{{item.total}}</text>
        </view>

        <view class="category-bar-container">
          <view class="category-bar">
            <view
              class="bar-fill income-bar"
              style="width: {{item.percentage}}%"
            ></view>
          </view>
          <text class="bar-percentage">{{item.percentage}}%</text>
        </view>

        <view class="category-footer">
          <text class="category-count">{{item.count}} ç¬”äº¤æ˜“</text>
        </view>
      </view>
    </view>
  </view>

  <!-- æ”¯å‡ºåˆ†ç±» -->
  <view class="section">
    <view class="section-header">
      <view class="section-icon expense-icon">Â¥</view>
      <text class="section-title expense-title">æ”¯å‡ºåˆ†å¸ƒ</text>
    </view>

    <view wx:if="{{expenseCategories.length === 0}}" class="empty">
      <text class="empty-icon">ðŸ“Š</text>
      <text class="empty-text">æš‚æ— æ”¯å‡ºè®°å½•</text>
    </view>

    <view wx:else class="category-list">
      <view wx:for="{{expenseCategories}}" wx:key="category" class="category-item">
        <view class="category-header">
          <view class="category-info">
            <view class="category-dot expense-dot"></view>
            <text class="category-name">{{item.category}}</text>
          </view>
          <text class="category-amount expense-amount">Â¥{{item.total}}</text>
        </view>

        <view class="category-bar-container">
          <view class="category-bar">
            <view
              class="bar-fill expense-bar"
              style="width: {{item.percentage}}%"
            ></view>
          </view>
          <text class="bar-percentage">{{item.percentage}}%</text>
        </view>

        <view class="category-footer">
          <text class="category-count">{{item.count}} ç¬”äº¤æ˜“</text>
        </view>
      </view>
    </view>
  </view>
</view>
