<view class="container">
  <view class="header">
    <view class="avatar">
      <text class="avatar-text">{{userInfo.nickname ? userInfo.nickname.charAt(0).toUpperCase() : (userInfo.username ? userInfo.username.charAt(0).toUpperCase() : 'U')}}</text>
    </view>
    <view class="user-info">
      <text class="username">{{userInfo.nickname || userInfo.username}}</text>
      <text class="email">{{userInfo.email}}</text>
    </view>
    <view class="edit-icon" bindtap="onEditNickname">
      <text>âœï¸</text>
    </view>
  </view>

  <view class="stats-section">
    <view class="stat-item">
      <text class="stat-value">{{stats.transactionCount}}</text>
      <text class="stat-label">äº¤æ˜“ç¬”æ•°</text>
    </view>
    <view class="stat-divider"></view>
    <view class="stat-item">
      <text class="stat-value income">Â¥{{stats.totalIncome}}</text>
      <text class="stat-label">æ€»æ”¶å…¥</text>
    </view>
    <view class="stat-divider"></view>
    <view class="stat-item">
      <text class="stat-value expense">Â¥{{stats.totalExpense}}</text>
      <text class="stat-label">æ€»æ”¯å‡º</text>
    </view>
  </view>

  <view class="menu-section">
    <view wx:if="{{userInfo.role === 'ADMIN'}}" class="menu-item" bindtap="onAIModels">
      <view class="menu-left">
        <text class="menu-icon">ğŸ¤–</text>
        <text class="menu-title">AIæ¨¡å‹é…ç½®</text>
      </view>
      <text class="menu-arrow">â€º</text>
    </view>

    <view class="menu-item" bindtap="onAbout">
      <view class="menu-left">
        <text class="menu-icon">â„¹ï¸</text>
        <text class="menu-title">å…³äºæˆ‘ä»¬</text>
      </view>
      <text class="menu-arrow">â€º</text>
    </view>

    <view class="menu-item" bindtap="onLogout">
      <view class="menu-left">
        <text class="menu-icon">ğŸšª</text>
        <text class="menu-title">é€€å‡ºç™»å½•</text>
      </view>
      <text class="menu-arrow">â€º</text>
    </view>
  </view>

  <view class="footer">
    <text class="footer-text">æ™ºèƒ½è®°è´¦ v1.0.0</text>
  </view>

  <view class="modal-mask" wx:if="{{showEditNicknameDialog}}" bindtap="closeEditNicknameDialog">
    <view class="modal-content" catchtap="stopPropagation">
      <view class="modal-header">
        <text class="modal-title">ä¿®æ”¹æ˜µç§°</text>
      </view>
      <view class="modal-body">
        <input class="nickname-input" 
               value="{{editNickname}}" 
               bindinput="onNicknameInput" 
               placeholder="è¯·è¾“å…¥æ–°æ˜µç§°" 
               maxlength="50" />
      </view>
      <view class="modal-footer">
        <button class="modal-btn cancel-btn" bindtap="closeEditNicknameDialog">å–æ¶ˆ</button>
        <button class="modal-btn confirm-btn" bindtap="saveNickname">ä¿å­˜</button>
      </view>
    </view>
  </view>
</view>
